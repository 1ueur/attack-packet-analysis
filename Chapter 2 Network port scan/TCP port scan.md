포트 스캔은 불법이다. 허가되지 않은 사용자가 상용 시스템에 침투하려는 시도 자체를 대부분의 국가에서 불법으로 지정하고 있다. 합법적으로 포트 스캐닝을 하여려면 자신이 권한을 가진 시스템에서만 사용해야 한다.

🧸 **사용 도구** : ```Nmap```

# ⚖️ TCP port scan
TCP 포트 스캔은 3-way-handshake를 이용하여 포트의 개방 여부를 파악한다.

예를 들어 **열려 있지 않은 포트**로 ```SYN```을 전송하면 서버 측에서는 포트가 열려 있지 않은 상태라는 것을 알려주고자 ```RST-ACK``` 패킷으로 응답한다.
반대로 **열려 있는 포트**로 ```SYN```을 전송하면 서버 측에서 ```SYN-ACK``` 패킷으로 응답해준다.

이후에 정상적인 3-way-handshake가 이루어 지는데, 이 때 서버의 접속 로그에 남을 수도 있다. 공격자의 입장에서는 치명적인 문제가 된다.

만약 방화벽이나 iptables와 같은 **차단 정책**에 포트 스캔이 차단되었을 때는 TCP나 UDP 관계없이 어떠한 패킷도 응답하지 않는다.

포트 상태|공격자|공격 대상|공격자
:---:|:---:|:---:|:---:
열린 포트|```SYN```|```SYN-ACK```|```ACK```
닫힌 포트|```SYN```|```RST-ACK```|```-```
차단 정책|```SYN```|```-```|```-```

TCP 포트 스캔에서 로그를 남기지 않도록 스캔하는 방법을 ```Stealth 스캔```이라고 한다. 3-way-handshake 과정을 이용하며, TCP Half open 스캔과 Fin, Xmas, Null 스캔 등의 방법이 있다.

## 💡 TCP SYN scan
Nmap을 이용한 TCP SYN 스캔의 기본 명령어는 ```nmap -sT [대상 서버 IP]``` 이다. (뒤에 ```-p 포트``` 지정을 할 수 있다.)

