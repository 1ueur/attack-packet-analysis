# ⚖️ UDP port scan
UDP는 3-way-handshake가 없는 **신뢰성 없는 통신**이지만 수신 측의 포트가 닫혀있을 때는 **ICMP가 응답**하기 때문에 상태 값 정도는 확인할 수 있다.

열려 있는 포트로부터는 특정 UDP 응답 값이 수신되고, **닫혀 있는 포트**로부터는 ```ICMP port Unreachable``` 패킷이 수신되며, 방화벽과 같은 차단 정책에 차단되었을 때는 어떠한 패킷도 응답하지 않는다.

포트 상태|공격자|공격 대상
:---:|:---:|:---:
열린 포트|```UDP```|```UDP```
닫힌 포트|```UDP```|```ICMP port Unreachable```
차단 정책|```UDP```|```-```

Nmap을 이용한 UDP 포트 스캔의 기본 명령어는 ```nmap -sU [대상 서버 IP]``` 형식이다.

TCP 포트 스캔과는 다르게 다수의 **ICMP port Unreachable** 패킷이 확인된다.

![스크린샷 2022-03-25 오후 7 12 21](https://user-images.githubusercontent.com/66156026/160101317-65b3c3bb-c121-4118-993f-831fb384b6d1.png)

알려진 포트로 요청 패킷을 전송할 때는 해당 포트의 서비스에 상응하는 요청 패킷이 전송되고, 응답 패킷 또한 서비스에 상응하는 패킷으로 수신되는데, 
포트 스캔 도구의 종류나 버전에 따라 다른 행태일 것으로 예상한다. 닫혀 있는 포트로부터는 ICMP Port Unreachable 패킷이 수신되었다.

포트 스캔과 관련한 보안 점검 중 취약점이 발견되었다면 1차원적으로 스캔을 시도하는 **IP를 방화벽 차단 정책에 추가하는 방법**이 있다.
궁극적인 방안은 자체적인 스캔 점검 결과에 따라 외부로 노출된 포트를 방화벽의 차단 정책 또는 서버 구간에서의 ```iptables```를 이용하여 차단하고,
**신뢰할 수 있는 IP 대역만 허용**하여 정보 노출의 취약점을 보완해야 한다.