# ⚔️ 대역폭 공격
대역폭 공격은 공격 대상의 네트워크 회선 대역폭을 고갈시켜 더 이상의 정상 사용자가 접속하지 못하게 만드는 공격이다.
공격자는 대규모 트래픽을 성생하기 위해 위조가 쉬운 UDP나 ICMP를 주로 사용하고, 패킷의 크기를 가능한 한 크게 위조하여 전송한다.

## 💡 UDP Flooding
UDP는 **비연결형** 프로토콜이자, 데이터 전송 시 오류가 발생하더라도 재전송을 하지 않는 신뢰성 없는 프로토콜이다. 
빠른 속도가 우선이 되는 실시간 방송이나 데이터가 유실되어도 큰 지장이 없는 데이터를 전송할 때 사용한다.

UDP는 패킷 구조가 단순하고 3-way-handshake와 같은 검증 절차가 없어서 패킷의 크기와 출발지 IP도 위조가 가능하기 때문에 **UDP를 이용한 공격에서는 출발지 IP로 공격자를 추적하는 것은 옳지 않다.**

<img width="430" alt="udp-header" src="https://user-images.githubusercontent.com/66156026/159487814-e44a008c-1ff9-45c8-8288-3b981f2009b2.png">

### 🧸 UDP Flooding의 패킷 분석
![스크린샷 2022-04-04 오후 11 34 12](https://user-images.githubusercontent.com/66156026/161567220-92a6369c-2c9e-4ede-afe0-eef67c82fd7b.png)

프로토콜 ```UDP```, 패킷의 크기는 ```1442```이다. 패킷의 크기가 상당히 큰 것을 알 수 있고, 데이터를 보면 '```xxxx```' 형태의 의미 없는 값임을 알 수 있다.
**패킷을 의도적으로 크게 만들기 위한 것**이라고 간주할 수 있다.

또한 목적지가 같은 여러 패킷에 모든 출발지 IP가 무작위로 다른 것을 보면 **위조한(Spoofing) 상태**라고 생각할 수 있다.
대부분 자신의 IP를 숨기기 위함이고, Anti-DDoS와 같은 차단 장비에서 임계치 차단 정책에 차단되지 않게 하기 위해 출발지 IP를 위조하는 것이 당연시된다.
그렇기 때문에 UDP와 ICMP를 이용한 공격은 *대부분 출발지 IP가 위조되었을 것*이라 생각하는 게 좋다.

애초에 UDP 프로토콜을 사용하면서 공격 대상 포트가 ```80번 HTTP```로 지정되어 있다. **UDP를 포트 번호 80으로 요청했다는 것 자체로 비정상 요청**이라 볼 수 있으며,
대역폭 공격은 회선의 대역폭을 가득 채우는 것이 목적이기 때문에 **목적지 포트가 어디로 지정되었는지는 공격의 영향도와 관련이 없다.**

> ```QUIC```라는 프로토콜은 UDP를 이용하여 포트 번호 **80** 또는 **443**으로 통신한다. <br/>
> 그러나 **이런 특수한 프로토콜이 자신이 운영 중인 네트워크에서 서비스되고 있지 않다면 UDP로 80/443 통신은 없는 것과 마찬가지로 생각하는 것이 맞다.**

